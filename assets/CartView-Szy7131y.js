import{_ as v,m as x,f as w,r as b,o as i,c,a as t,g as d,w as u,n as r,F as _,h as C,d as l,t as e,i as h,v as f,D as k,e as $}from"./index-M0JT7z_k.js";import{u as g}from"./cartStore-EAgqEWCs.js";import{L as j}from"./LoadingComponent-uKAOJsvZ.js";import"./axios-rFp88-ks.js";const N={components:{LoadingComponent:j},data(){return{couponCode:""}},methods:{...x(g,["getCart","removeCartAll","removeCartItem","changeCartQty","useCoupon"])},computed:{...w(g,["carts","total","isLoading","final_total","couponSuccess"])},mounted(){window.scrollTo({behavior:"smooth",top:0}),this.getCart()}},L={class:"bg-dark text-light py-lg-8 py-5"},S={class:"container"},T=$('<ul class="d-flex justify-content-center align-items-center list-unstyled w-75 mx-auto mb-5"><li class="text-center"><p class="mb-0 text-sm fs-xs fs-lg-sm">Step.1</p><p class="mb-0 text-sm fs-xs fs-lg-sm white-space-nowrap">購買項目</p></li><i class="bi bi-chevron-right mx-lg-4 mx-2 mx-md-5"></i><li class="text-center opacity-50"><p class="mb-0 text-sm fs-xs fs-lg-sm">Step.2</p><p class="mb-0 text-sm fs-xs fs-lg-sm white-space-nowrap">填寫資料</p></li><i class="bi bi-chevron-right mx-lg-4 mx-2 mx-md-5"></i><li class="text-center opacity-50"><p class="mb-0 text-sm fs-xs fs-lg-sm">Step.3</p><p class="mb-0 text-sm fs-xs fs-lg-sm white-space-nowrap">付款資訊</p></li><i class="bi bi-chevron-right mx-lg-4 mx-2 mx-md-5"></i><li class="text-center opacity-50"><p class="mb-0 text-sm fs-xs fs-lg-sm">Step.4</p><p class="mb-0 text-sm fs-xs fs-lg-sm white-space-nowrap">訂單完成</p></li></ul>',1),V=t("i",{class:"bi bi-caret-left-fill"},null,-1),q={class:"row"},U={class:"col-md-8 mb-8 mb-lg-0"},A={class:"d-flex justify-content-between mb-4"},B=t("h4",null,"購物車品項",-1),D={key:0,class:"fs-2 text-center h-100 py-5 mb-0"},I={key:1,class:"list-unstyled"},Q=["src","alt"],F={class:"ms-4 d-flex flex-column justify-content-between w-100"},R={class:"d-flex justify-content-between mb-2 mb-lg-0"},z={class:"mb-0 fs-4"},E=["onClick"],M={class:"d-flex flex-column flex-md-row align-items-lg-center"},P={class:"mb-0 fs-6 mb-2 mb-lg-0 me-md-5 me-0"},G={class:""},H={class:"input-group pe-md-5 pe-0 w-md-50"},J={class:"input-group-prepend"},K=["disabled","onClick"],O=t("i",{class:"bi bi-dash"},null,-1),W=[O],X=["onUpdate:modelValue"],Y={class:"input-group-append"},Z=["onClick"],tt=t("i",{class:"bi bi-plus"},null,-1),st=[tt],ot={class:"ms-auto mb-0 fs-6 d-lg-inline-block d-none"},et={class:"ms-2"},nt={class:"d-lg-none d-flex align-items-center justify-content-between"},lt={class:"mb-0 fs-6"},it={class:"ms-2"},ct=["onClick"],at={class:"col-md-4"},dt={class:"border p-4 mb-4"},rt=t("h4",{class:"fw-bold mb-4 pb-3 border-bottom"},"訂單資訊",-1),pt={class:"pb-4 border-bottom border-light border-opacity-10 mb-4"},mt={class:"mb-2 d-flex justify-content-between"},bt=t("p",{class:"mb-0"},"目前數量",-1),ut={class:"mb-0"},_t={class:"font-arimo"},ht={class:"mb-2 d-flex justify-content-between"},ft=t("p",{class:"mb-0"},"小計",-1),gt={class:"font-arimo mb-0"},yt={class:"mt-4"},vt=t("p",{class:"mb-1 opacity-75"},"*消費滿500元 ，折85折【movie500】",-1),xt={class:"mb-2 d-flex justify-content-between"},wt={key:0,class:"d-flex justify-content-between"},Ct=t("p",{class:"mb-0 bg-danger rounded-1 px-2"},"已折扣",-1),kt={class:"font-arimo mb-0"},$t={class:"d-flex justify-content-between mt-4"},jt=t("p",{class:"mb-0 h5"},"總計",-1),Nt={class:"mb-0 h5 fw-bold"};function Lt(o,n,St,Tt,p,Vt){const m=b("RouterLink"),y=b("LoadingComponent");return i(),c(_,null,[t("div",L,[t("section",null,[t("div",S,[T,d(m,{to:"/products",class:"btn btn-outline-light rounded-pill text-decoration-none mb-4 d-inline-block"},{default:u(()=>[V,l("繼續購物")]),_:1}),t("div",q,[t("div",U,[t("div",A,[B,t("button",{type:"button",class:r(["btn btn-outline-light px-4 rounded-pill",o.carts.length>0?"d-inline-block":"d-none"]),onClick:n[0]||(n[0]=(...s)=>o.removeCartAll&&o.removeCartAll(...s))},"清空購物車",2)]),o.carts.length===0?(i(),c("p",D,"目前沒有訂單唷！！")):(i(),c("ul",I,[(i(!0),c(_,null,C(o.carts,s=>(i(),c("li",{class:"d-flex mb-4 pb-4 border-bottom",key:s.id},[t("img",{src:s.product.imageUrl,alt:s.product.title,style:{width:"100px","object-fit":"cover"}},null,8,Q),t("div",F,[t("div",R,[t("p",z,e(s.product.title),1),t("i",{class:"bi bi-trash fs-5 btn btn-outline-light border-0 d-lg-block d-none",onClick:a=>o.removeCartItem(s.id)},null,8,E)]),t("div",M,[t("p",P,[l("NT$ "+e(s.product.price)+" ",1),t("span",G," / "+e(s.product.unit),1)]),t("div",H,[t("div",J,[t("button",{class:"btn btn-outline-light border-0 py-2",type:"button",disabled:s.qty===1,onClick:a=>{s.qty--,o.changeCartQty(s.id,s.qty)}},W,8,K)]),h(t("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none",readonly:"",value:"1",min:"1","onUpdate:modelValue":a=>s.qty=a},null,8,X),[[f,s.qty]]),t("div",Y,[t("button",{class:"btn btn-outline-light border-0 py-2",type:"button",onClick:a=>{s.qty++,o.changeCartQty(s.id,s.qty)}},st,8,Z)])]),t("p",ot,[l("總計：NT$ "),t("span",et,e(s.total),1)])]),t("div",nt,[t("p",lt,[l("總計：NT$ "),t("span",it,e(s.total),1)]),t("i",{class:"bi bi-trash fs-5 btn btn-outline-light border-0",onClick:a=>o.removeCartItem(s.id)},null,8,ct)])])]))),128))]))]),t("div",at,[t("div",dt,[rt,t("div",pt,[t("div",mt,[bt,t("p",ut,[l(" 共 "),t("span",_t,e(o.carts.length),1),l(" 部")])]),t("div",ht,[ft,t("p",gt,"NT$ "+e(o.total),1)]),t("div",yt,[vt,t("div",xt,[h(t("input",{type:"text",class:"form-control rounded-0 border-secondary w-70",placeholder:"請輸入優惠碼",style:{width:"70%"},"onUpdate:modelValue":n[1]||(n[1]=s=>p.couponCode=s)},null,512),[[f,p.couponCode]]),t("button",{type:"button",class:r(["btn btn-danger w-30 rounded-0 text-light border-0",{disabled:o.total<500}]),onClick:n[2]||(n[2]=s=>o.useCoupon(this.couponCode,o.total))}," 使用優惠券 ",2)]),this.couponSuccess?(i(),c("div",wt,[Ct,t("p",kt,"NT$ "+e(o.total-o.final_total),1)])):k("",!0)])]),t("div",$t,[jt,t("p",Nt,"NT$ "+e(o.final_total),1)]),d(m,{to:"/checkout",class:r(["btn btn-danger w-100 mt-4",{disabled:o.carts.length===0}])},{default:u(()=>[l("下一步")]),_:1},8,["class"])])])])])])]),d(y,{active:o.isLoading,"onUpdate:active":n[3]||(n[3]=s=>o.isLoading=s),id:"cartPage"},null,8,["active"])],64)}const Dt=v(N,[["render",Lt]]);export{Dt as default};
