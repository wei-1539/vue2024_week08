import{T as _}from"./ToastMessage-BDVf6UPQ.js";import{L as f}from"./LoadingComponent-RV0Qa-u3.js";import{_ as g,m as v,r as d,o as w,c as b,d as s,B as x,w as l,v as p,f as m,z as T,A as k}from"./index-cTZfT-nB.js";import{a as L,u as S}from"./axios-YZ117G6_.js";var M={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"wei_rio",BASE_URL:"/vue2024_week08/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:V}=M,E={components:{ToastMessages:_,LoadingComponent:f},data(){return{isLoading:!1,user:{}}},methods:{...v(S,["pushMessage"]),login(){const o=`${V}admin/signin`;this.isLoading=!0,L.post(o,this.user).then(e=>{const{token:i,expired:r}=e.data;document.cookie=`hexSchool = ${i};expires = ${new Date(r)}; path=/`,this.loginToken=i,this.$router.push("/admin/product")}).catch(e=>{this.pushMessage({style:"danger",title:"登入失敗",content:e.response.data.message})}).finally(()=>{this.isLoading=!1})},check(){document.cookie.replace(/(?:(?:^|.*;\s*)hexSchool\s*=\s*([^;]*).*$)|^.*$/,"$1")!==""&&this.$router.push("/")}},created(){this.check()},mounted(){window.scrollTo({behavior:"smooth",top:0})}},a=o=>(T("data-v-be7a4910"),o=o(),k(),o),y={class:"overflow-hidden"},I=a(()=>s("div",{class:"bg"},null,-1)),U={class:"container m-sm-0 p-sm-0 position-absolute top-50 start-50 translate-middle text-center"},B={class:"row justify-content-center"},D=a(()=>s("h1",{class:"h2 mb-3 font-weight-normal text-light"},"後台登入",-1)),R={class:"col-md-4 col-10"},A={class:"form-floating mb-3"},C=a(()=>s("label",{for:"username"},"Email address",-1)),P={class:"form-floating"},$=a(()=>s("label",{for:"password"},"Password",-1)),q=a(()=>s("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 登入 ",-1)),N=a(()=>s("p",{class:"mt-5 mb-3 text-light"},"© 2021~∞ - 六角學院",-1));function O(o,e,i,r,n,c){const u=d("LoadingComponent"),h=d("ToastMessages");return w(),b("div",y,[I,s("div",U,[s("div",B,[D,s("div",R,[s("form",{id:"form",class:"form-signin",onSubmit:e[2]||(e[2]=x((...t)=>c.login&&c.login(...t),["prevent"]))},[s("div",A,[l(s("input",{type:"email",class:"form-control",id:"username","onUpdate:modelValue":e[0]||(e[0]=t=>n.user.username=t),placeholder:"name@example.com",required:"",autofocus:""},null,512),[[p,n.user.username]]),C]),s("div",P,[l(s("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":e[1]||(e[1]=t=>n.user.password=t),placeholder:"Password",required:""},null,512),[[p,n.user.password]]),$]),q],32)])]),N]),m(u,{active:n.isLoading,"onUpdate:active":e[3]||(e[3]=t=>n.isLoading=t)},null,8,["active"]),m(h)])}const G=g(E,[["render",O],["__scopeId","data-v-be7a4910"]]);export{G as default};
