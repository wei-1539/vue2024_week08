import{T as L}from"./ToastMessage-4rpGS7ed.js";import{m,_ as g,r as i,o as _,c as h,a as e,g as a,w as l,d as r,F as v,b as T,j as C}from"./index-emLtRGxt.js";import{a as p,u as k}from"./axios-RRQbb5W4.js";import{c as V}from"./collapseMixin-sayVBdvl.js";import{L as E}from"./LoadingComponent-IeJUYtMv.js";import"./selector-engine-zqAueP_Z.js";var R={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"wei_rio",BASE_URL:"/vue2024_week08/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:$}=R,M={mixins:[V],components:{LoadingComponent:E},data(){return{isLoading:!1}},methods:{...m(k,["pushMessage"]),logout(){this.isLoading=!0;const o=`${$}/logout`;p.post(o).then(s=>{this.isLoading=!1,this.pushMessage({style:"success",title:"登出成功",content:s.data.message}),document.cookie="hexSchool=; expires=; path=/",this.$router.push("/login")}).catch(s=>{this.pushMessage({style:"danger",title:"登出失敗",content:s.response.data.message})})}}},y={class:"navbar navbar-expand-lg navbar-dark bg-dark sticky-top"},B={class:"container-fluid"},U=e("div",{class:"navbar-brand"},"CINEMA",-1),w=e("span",{class:"navbar-toggler-icon"},null,-1),x=[w],N={class:"collapse navbar-collapse justify-content-end",id:"navbarNav",ref:"navbar"},S={class:"navbar-nav"},I={class:"nav-item"},A={class:"nav-item"},D={class:"nav-item"},O={class:"nav-item"},P={class:"nav-item"};function j(o,s,f,b,c,u){const n=i("RouterLink"),d=i("LoadingComponent");return _(),h(v,null,[e("nav",y,[e("div",B,[U,e("button",{class:"navbar-toggler",type:"button",onClick:s[0]||(s[0]=(...t)=>o.bsToggle&&o.bsToggle(...t))},x),e("div",N,[e("ul",S,[e("li",I,[a(n,{to:"/admin/product",class:"nav-link",onClick:o.bsToggle},{default:l(()=>[r("產品")]),_:1},8,["onClick"])]),e("li",A,[a(n,{to:"/admin/order",class:"nav-link",onClick:o.bsToggle},{default:l(()=>[r("訂單")]),_:1},8,["onClick"])]),e("li",D,[a(n,{to:"/admin/coupons",class:"nav-link",onClick:o.bsToggle},{default:l(()=>[r("優惠卷")]),_:1},8,["onClick"])]),e("li",O,[e("a",{onClick:s[1]||(s[1]=(...t)=>u.logout&&u.logout(...t)),class:"nav-link",style:{cursor:"pointer"}},"登出")]),e("li",P,[a(n,{to:"/",class:"nav-link",onClick:o.bsToggle},{default:l(()=>[r("回首頁")]),_:1},8,["onClick"])])])],512)])]),a(d,{active:c.isLoading,"onUpdate:active":s[2]||(s[2]=t=>c.isLoading=t)},null,8,["active"])],64)}const F=g(M,[["render",j]]);var H={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"wei_rio",BASE_URL:"/vue2024_week08/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:z}=H,q={components:{BackNavLayout:F,ToastMessages:L},data(){return{status:!1}},methods:{...m(k,["pushMessage"]),checkUser(){const o=`${z}api/user/check`;p.post(o).then(s=>{this.pushMessage({style:"success",title:"登入成功",content:s.data.message}),this.status=!0}).catch(s=>{this.pushMessage({style:"danger",title:"錯誤訊息",content:s.response.data.message}),this.$router.push("/login")})}},created(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)hexSchool\s*=\s*([^;]*).*$)|^.*$/,"$1");p.defaults.headers.common.Authorization=o,this.checkUser()}},G={class:"container-fluid"};function J(o,s,f,b,c,u){const n=i("BackNavLayout"),d=i("ToastMessages"),t=i("RouterView");return _(),h(v,null,[a(n),e("div",G,[a(d),c.status?(_(),T(t,{key:0})):C("",!0)])],64)}const ss=g(q,[["render",J]]);export{ss as default};
