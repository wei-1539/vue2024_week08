import{T}from"./ToastMessage-_ksHOc9G.js";import{m,_ as h,r as i,o as _,c as g,d as e,f as a,g as l,h as r,F as v,i as b,D as C}from"./index-4ACHnmJi.js";import{a as p,u as k}from"./axios-ewy1NgMg.js";import{c as V}from"./collapseMixin-iR7lGWiB.js";import{L as E}from"./LoadingComponent-BZzP1iFJ.js";import"./selector-engine-Zn4slc2v.js";var R={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"wei_rio",BASE_URL:"/vue2024_week08/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:$}=R,M={mixins:[V],components:{LoadingComponent:E},data(){return{isLoading:!1}},methods:{...m(k,["pushMessage"]),logout(){this.isLoading=!0;const o=`${$}/logout`;p.post(o).then(s=>{this.isLoading=!1,this.pushMessage({style:"success",title:"登出成功",content:s.data.message}),document.cookie="hexSchool=; expires=; path=/",this.$router.push("/login")}).catch(s=>{this.pushMessage({style:"danger",title:"登出失敗",content:s.response.data.message})})}}},y={class:"navbar navbar-expand-lg navbar-dark bg-dark sticky-top"},B={class:"container-fluid"},U=e("div",{class:"navbar-brand"},"CINEMA",-1),x=e("span",{class:"navbar-toggler-icon"},null,-1),N=[x],S={class:"collapse navbar-collapse justify-content-end",id:"navbarNav",ref:"navbar"},w={class:"navbar-nav"},I={class:"nav-item"},A={class:"nav-item"},D={class:"nav-item"},O={class:"nav-item"},P={class:"nav-item"};function F(o,s,f,L,c,u){const n=i("RouterLink"),d=i("LoadingComponent");return _(),g(v,null,[e("nav",y,[e("div",B,[U,e("button",{class:"navbar-toggler",type:"button",onClick:s[0]||(s[0]=(...t)=>o.bsToggle&&o.bsToggle(...t))},N),e("div",S,[e("ul",w,[e("li",I,[a(n,{to:"/admin/product",class:"nav-link",onClick:o.bsToggle},{default:l(()=>[r("產品")]),_:1},8,["onClick"])]),e("li",A,[a(n,{to:"/admin/order",class:"nav-link",onClick:o.bsToggle},{default:l(()=>[r("訂單")]),_:1},8,["onClick"])]),e("li",D,[a(n,{to:"/admin/coupons",class:"nav-link",onClick:o.bsToggle},{default:l(()=>[r("優惠卷")]),_:1},8,["onClick"])]),e("li",O,[e("a",{onClick:s[1]||(s[1]=(...t)=>u.logout&&u.logout(...t)),class:"nav-link",style:{cursor:"pointer"}},"登出")]),e("li",P,[a(n,{to:"/",class:"nav-link",onClick:o.bsToggle},{default:l(()=>[r("回首頁")]),_:1},8,["onClick"])])])],512)])]),a(d,{active:c.isLoading,"onUpdate:active":s[2]||(s[2]=t=>c.isLoading=t)},null,8,["active"])],64)}const H=h(M,[["render",F]]);var j={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"wei_rio",BASE_URL:"/vue2024_week08/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:z}=j,q={components:{BackNavLayout:H,ToastMessages:T},data(){return{status:!1}},methods:{...m(k,["pushMessage"]),checkUser(){const o=`${z}api/user/check`;p.post(o).then(s=>{this.pushMessage({style:"success",title:"登入成功",content:s.data.message}),this.status=!0}).catch(s=>{this.pushMessage({style:"danger",title:"錯誤訊息",content:s.response.data.message}),this.$router.push("/login")})}},created(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)hexSchool\s*=\s*([^;]*).*$)|^.*$/,"$1");p.defaults.headers.common.Authorization=o,this.checkUser()}},G={class:"container-fluid"};function J(o,s,f,L,c,u){const n=i("BackNavLayout"),d=i("ToastMessages"),t=i("RouterView");return _(),g(v,null,[a(n),e("div",G,[a(d),c.status?(_(),b(t,{key:0})):C("",!0)])],64)}const ss=h(q,[["render",J]]);export{ss as default};
