import{_ as L,m,r as _,o as a,c as d,a as t,g as l,w as c,t as r,d as u,F as b,h as g,i as V,v as P,k as S,b as M}from"./index-M0JT7z_k.js";import{u as q}from"./cartStore-EAgqEWCs.js";import{a as y,u as A}from"./axios-rFp88-ks.js";import{S as E,a as N,A as D,P as R,N as U}from"./autoplay-QvXQ9M24.js";import{L as B}from"./LoadingComponent-uKAOJsvZ.js";var I={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"wei_rio",BASE_URL:"/vue2024_week08/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:f,VITE_PATH:v}=I,F={components:{Swiper:E,SwiperSlide:N,LoadingComponent:B},data(){return{modules:[D,R,U],product:{},newContentTitle:"",newContent:[],filterMovie:[],isLoading:!1,qty:1}},methods:{...m(q,["addToCart","changeCartQty"]),...m(A,["pushMessage"]),getProduct(){this.getCategoryData();const{id:n}=this.$route.params,o=`${f}api/${v}/product/${n}`;this.isLoading=!0,y.get(o).then(i=>{this.product=i.data.product,this.content()}).catch(i=>{this.pushMessage({style:"danger",title:"產品資訊取得失敗",content:i.response.data.message})}).finally(()=>{setTimeout(()=>{this.isLoading=!1},500)})},content(){const n=this.product.content.split(`
`),o=[];for(let i=0;i<n.length;i++)o.push(n[i]);this.newContentTitle=o[0],o.shift(),this.newContent=o},getCategoryData(){const n=`${f}api/${v}/products/all`;let o=null;y.get(n).then(i=>{o=i.data.products.filter(h=>h.category===this.product.category&&h.title!==this.product.title),this.filterMovie=o}).catch(i=>{this.pushMessage({style:"danger",title:"產品資訊取得失敗",content:i.response.data.message})}).finally(()=>{setTimeout(()=>{this.isLoading=!1},500)})},reload(){window.scrollTo({behavior:"smooth",top:0})}},mounted(){this.getProduct(),window.scrollTo({behavior:"smooth",top:0})},created(){this.$watch(()=>this.$route.params,()=>{this.getProduct()})}},O={class:"bg-dark text-light py-lg-7 py-4"},Q={class:"container pb-7"},j={class:"row"},H={class:"col-md-7 d-flex flex-column justify-content-center mb-lg-0 mb-4"},Y={"aria-label":"breadcrumb "},z={class:"breadcrumb d-lg-none bg-dark px-0 mb-3"},G={class:"breadcrumb-item opacity-50"},J=t("li",{class:"opacity-25 px-2"},"/",-1),K={class:"breadcrumb-item opacity-50"},W=t("li",{class:"opacity-25 px-2"},"/",-1),X=t("li",{class:"breadcrumb-item","aria-current":"page"},"明細",-1),Z=["src","alt"],$={class:"col-md-5"},tt={"aria-label":"breadcrumb "},et={class:"breadcrumb bg-dark px-0 mb-2 d-none d-lg-flex"},ot={class:"breadcrumb-item opacity-50"},st=t("li",{class:"opacity-25 px-2"},"/",-1),it={class:"breadcrumb-item opacity-50"},nt=t("li",{class:"opacity-25 px-2"},"/",-1),rt=t("li",{class:"breadcrumb-item","aria-current":"page"},"明細",-1),at={class:"mb-1"},lt={class:"d-flex justify-content-end border-3 border-bottom pb-2 mb-4"},ct={key:0,class:"h5 mb-0 fw-bold text-danger me-3"},dt={key:1},pt={class:"h5 mb-0 me-4 opacity-75"},ut={class:"d-inline-block h5 mb-0 fw-bold text-danger me-3"},_t={class:"mb-0"},ht={class:"d-inline-block ms-2"},bt={class:"mb-4 border-3 border-bottom"},mt=t("h4",{class:"mb-2"},"電影描述",-1),gt={class:"movieContent opacity-75"},yt={class:"mb-2"},ft={class:"mb-4"},vt={class:"row align-items-center"},wt={class:"col-6"},xt={class:"input-group my-3 rounded bg-dark"},kt={class:"input-group-prepend"},Ct=["disabled"],Tt=t("i",{class:"bi bi-dash fs-5"},null,-1),Lt=[Tt],Vt={class:"input-group-append"},Pt=t("i",{class:"bi bi-plus fs-5"},null,-1),St=[Pt],Mt={class:"col-6"},qt={class:"w-100 position-relative my-5 border-3 border-top pt-5",style:{"padding-bottom":"56.25%"}},At=t("h3",{class:"mb-4 border-3 border-start border-danger ps-lg-3 ps-2"},"觀賞預告片",-1),Et=["src"],Nt={class:"pt-8"},Dt={class:"container bg-dark"},Rt=t("h2",{class:"text-light mb-lg-4 mb-3 ps-lg-3 ps-2 border-3 border-start border-danger"},"推薦電影",-1),Ut=["src","alt"];function Bt(n,o,i,h,e,w){const p=_("RouterLink"),x=_("swiper-slide"),k=_("swiper"),C=_("LoadingComponent");return a(),d(b,null,[t("div",O,[t("section",null,[t("div",Q,[t("div",j,[t("div",H,[t("nav",Y,[t("ol",z,[t("li",G,[l(p,{to:"/",class:"text-light text-decoration-none"},{default:c(()=>[u(" 首頁 ")]),_:1})]),J,t("li",K,[l(p,{to:"/products",class:"text-light text-decoration-none"},{default:c(()=>[u(" 電影選單 ")]),_:1})]),W,X])]),t("img",{class:"w-75 mx-auto",style:{},src:e.product.imageUrl,alt:e.product.title},null,8,Z)]),t("div",$,[t("nav",tt,[t("ol",et,[t("li",ot,[l(p,{to:"/",class:"text-light text-decoration-none"},{default:c(()=>[u(" 首頁 ")]),_:1})]),st,t("li",it,[l(p,{to:"/products",class:"text-light text-decoration-none"},{default:c(()=>[u(" 電影選單 ")]),_:1})]),nt,rt])]),t("h2",at,r(e.product.title),1),t("p",null,r(e.product.category)+"片",1),t("div",lt,[e.product.origin_price===e.product.price?(a(),d("p",ct,"NT$ "+r(e.product.price),1)):(a(),d("div",dt,[t("del",pt,"NT$ "+r(e.product.origin_price),1),t("p",ut,"NT$ "+r(e.product.price),1)])),t("p",_t,[u("/"),t("span",ht,r(e.product.unit),1)])]),t("div",bt,[mt,t("p",gt,r(e.product.description),1),t("h4",yt,r(e.newContentTitle),1),t("div",ft,[(a(!0),d(b,null,g(e.newContent,(s,T)=>(a(),d("p",{class:"movieContent opacity-75 mb-0",key:T},r(s),1))),128))])]),t("div",vt,[t("div",wt,[t("div",xt,[t("div",kt,[t("button",{class:"btn btn-outline-light rounded-0 p-2 bg-dark text-light",type:"button",id:"button-addon1",disabled:this.qty===1,onClick:o[0]||(o[0]=s=>{this.qty--,n.changeCartQty(e.product.id,this.qty)})},Lt,8,Ct)]),V(t("input",{type:"text",class:"form-control border text-center shadow-none bg-dark text-light fs-5",value:"1",min:"1",readonly:"","onUpdate:modelValue":o[1]||(o[1]=s=>this.qty=s)},null,512),[[P,this.qty]]),t("div",Vt,[t("button",{class:"btn btn-outline-light rounded-0 p-2 bg-dark text-light",type:"button",id:"button-addon2",onClick:o[2]||(o[2]=s=>{this.qty++,n.changeCartQty(e.product.id,this.qty)})},St)])])]),t("div",Mt,[t("a",{class:"text-nowrap btn btn-danger w-100 py-2",onClick:o[3]||(o[3]=S(s=>n.addToCart(e.product.id,this.qty),["prevent"]))},"加入購物車")])])])]),t("div",qt,[At,t("iframe",{id:"player",class:"position-absolute",width:"100%",height:"100%",src:`${e.product.youtubeLink}?rel=0&showinfo=0&color=white`,title:"YouTube video player",frameborder:"0",allow:" autoplay; ",allowfullscreen:""},null,8,Et)]),t("section",Nt,[t("div",Dt,[Rt,l(k,{modules:e.modules,pagination:!0,navigation:!0,loop:!0,speed:1500,autoplay:{delay:2500,disableOnInteraction:!1},"space-between":30,slidesPerView:1,breakpoints:{960:{slidesPerView:3}},class:"mySwiper"},{default:c(()=>[(a(!0),d(b,null,g(e.filterMovie,s=>(a(),M(x,{key:s.id},{default:c(()=>[l(p,{to:`/product/${s.id}`,onClick:w.reload},{default:c(()=>[t("img",{src:s.imageUrl,alt:s.title},null,8,Ut)]),_:2},1032,["to","onClick"])]),_:2},1024))),128))]),_:1},8,["modules"])])])])])]),l(C,{active:e.isLoading,"onUpdate:active":o[4]||(o[4]=s=>e.isLoading=s)},null,8,["active"])],64)}const Ht=L(F,[["render",Bt]]);export{Ht as default};
