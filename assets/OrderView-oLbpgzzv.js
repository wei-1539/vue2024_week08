import{_ as u,m as g,r as f,o as r,c as n,d as s,t as o,F as p,e as x,h as w,f as y,a as k}from"./index-4ACHnmJi.js";import{a as _,u as v}from"./axios-ewy1NgMg.js";import{L}from"./LoadingComponent-BZzP1iFJ.js";var T={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"wei_rio",BASE_URL:"/vue2024_week08/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:b,VITE_PATH:h}=T,S={components:{LoadingComponent:L},data(){return{isLoading:!1,order:{},user:{},products:{}}},methods:{...g(v,["pushMessage"]),getOrder(){const{id:l}=this.$route.params,t=`${b}api/${h}/order/${l}`;this.isLoading=!0,_.get(t).then(c=>{this.order=c.data.order,this.user=c.data.order.user,this.products=c.data.order.products}).catch(c=>{this.pushMessage({style:"danger",title:"訂單取得失敗",content:c.response.data.message})}).finally(()=>{setTimeout(()=>{this.isLoading=!1},500)})},date(l){if(l){const t=new Date(l*1e3),c=t.getFullYear(),m=t.getMonth()+1,e=t.getDate(),a=t.getHours(),i=t.getMinutes(),d=t.getSeconds();return`${c}/${m}/${e} ${a}:${i}:${d}`}else return""},payOrder(){const{id:l}=this.$route.params,t=`${b}api/${h}/pay/${l}`;this.isLoading=!0,_.post(t).then(c=>{this.$router.push(`/thankyou/${l}`),this.pushMessage({style:"success",title:"付款成功",content:c.data.message})}).catch(c=>{this.pushMessage({style:"danger",title:"付款失敗",content:c.response.data.message})}).finally(()=>{setTimeout(()=>{this.isLoading=!1},500)})}},mounted(){this.getOrder(),window.scrollTo({behavior:"smooth",top:0})}},V={class:"bg-dark text-light py-lg-8 py-5"},D={class:"container"},E=k('<ul class="d-flex justify-content-center align-items-center list-unstyled w-75 mx-auto mb-5"><li class="text-center opacity-50"><p class="mb-0 text-sm fs-xs fs-lg-sm">Step.1</p><p class="mb-0 text-sm fs-xs fs-lg-sm white-space-nowrap">購買項目</p></li><i class="bi bi-chevron-right mx-lg-4 mx-2 mx-md-5"></i><li class="text-center opacity-50"><p class="mb-0 text-sm fs-xs fs-lg-sm">Step.2</p><p class="mb-0 text-sm fs-xs fs-lg-sm white-space-nowrap">填寫資料</p></li><i class="bi bi-chevron-right mx-lg-4 mx-2 mx-md-5"></i><li class="text-center"><p class="mb-0 text-sm fs-xs fs-lg-sm">Step.3</p><p class="mb-0 text-sm fs-xs fs-lg-sm white-space-nowrap">付款資訊</p></li><i class="bi bi-chevron-right mx-lg-4 mx-2 mx-md-5"></i><li class="text-center opacity-50"><p class="mb-0 text-sm fs-xs fs-lg-sm">Step.4</p><p class="mb-0 text-sm fs-xs fs-lg-sm white-space-nowrap">訂單完成</p></li></ul>',1),M={class:"row"},N={class:"col-md-6 mb-mb-0 mb-4"},O={class:"mb-lg-3 d-flex justify-content-between align-items-center border-bottom pb-2"},C=s("h4",{class:"text-light ps-lg-3 ps-2 border-3 border-start border-danger"},"訂單明細",-1),R={class:"text-light ps-lg-3 ps-2"},U={class:"border-bottom py-lg-3 py-3 mx-0 list-unstyled"},j=["src"],A={class:"col d-flex flex-column justify-content-between w-100 px-4"},B={class:"d-flex"},I={class:"mb-0"},P={class:"d-flex align-items-center justify-content-between"},F={class:"mb-0"},H={class:"lh-lg me-md-0 mb-0"},q={class:"col-md-6 mb-mb-0 mb-6"},Y={class:"py-3 px-lg-5 px-3 shadow-lg-lg bg-light bg-opacity-90 rounded-3 text-black"},z=s("p",{class:"fs-4 text-center"}," 訂單資訊 ",-1),G={class:"mb-5 p-0"},J={class:"mb-3 d-flex ps-0 p-2 border-bottom border-dark border-opacity-20"},K={class:"mb-0 fw-regular d-md-none"},Q=s("p",{class:"mb-0 fw-regular d-none d-md-block col-4"},"訂單金額：",-1),W={class:"mb-0 col d-none d-md-block col"},X={class:"mb-3 d-flex ps-0 p-2 border-bottom border-dark border-opacity-20"},Z={class:"mb-0 fw-regular d-md-none"},$=s("p",{class:"mb-0 fw-regular d-none d-md-block col-4"},"訂單編號：",-1),ss={class:"mb-0 col d-none d-md-block col"},es={class:"mb-3 d-flex ps-0 p-2 border-bottom border-dark border-opacity-20"},os={class:"mb-0 fw-regular d-md-none"},ts=s("p",{class:"mb-0 fw-regular d-none d-md-block col-4"},"下單時間：",-1),cs={class:"mb-0 col d-none d-md-block col"},ds={class:"mb-3 d-flex ps-0 p-2 border-bottom border-dark border-opacity-20"},ls={class:"mb-0 fw-regular d-md-none"},rs={key:0,class:"text-success fw-bold"},ns={key:1,class:"text-danger fw-bold"},as=s("p",{class:"mb-0 fw-regular d-none d-md-block col-4"},"付款狀態：",-1),is={class:"mb-0 col d-none d-md-block col fw-bold"},ms={key:0,class:"text-success"},ps={key:1,class:"text-danger"},_s={class:"mb-3 d-flex ps-0 p-2 border-bottom border-dark border-opacity-20"},bs={class:"mb-0 fw-regular d-md-none"},hs=s("p",{class:"mb-0 fw-regular d-none d-md-block col-4"},"寄送地址：",-1),us={class:"mb-0 col d-none d-md-block col"},gs={class:"mb-3 d-flex ps-0 p-2 border-bottom border-dark border-opacity-20"},fs={class:"mb-0 fw-regular d-md-none"},xs=s("p",{class:"mb-0 fw-regular d-none d-md-block col-4"},"顧客姓名：",-1),ws={class:"mb-0 col d-none d-md-block col"},ys={class:"mb-3 d-flex ps-0 p-2 border-bottom border-dark border-opacity-20"},ks={class:"mb-0 fw-regular d-md-none"},vs=s("p",{class:"mb-0 fw-regular d-none d-md-block col-4"},"聯絡電話：",-1),Ls={class:"mb-0 col d-none d-md-block col"},Ts={class:"mb-3 d-flex ps-0 p-2 border-bottom border-dark border-opacity-20"},Ss={class:"mb-0 fw-regular d-md-none"},Vs=s("p",{class:"mb-0 fw-regular d-none d-md-block col-4"},"電子信箱：",-1),Ds={class:"mb-0 col d-none d-md-block col"},Es={class:"mb-3 d-flex ps-0 p-2 border-opacity-20"},Ms={class:"mb-0 fw-regular d-md-none"},Ns=s("p",{class:"mb-0 fw-regular d-none d-md-block col-4"},"客戶備註：",-1),Os={class:"mb-0 col d-none d-md-block col"};function Cs(l,t,c,m,e,a){const i=f("LoadingComponent");return r(),n(p,null,[s("div",V,[s("section",null,[s("div",D,[E,s("div",M,[s("div",N,[s("div",O,[C,s("h5",R,"總金額 NT$ "+o(e.order.total),1)]),s("ul",U,[(r(!0),n(p,null,x(e.products,d=>(r(),n("li",{key:d.id,class:"row mb-4"},[s("img",{class:"product__img",src:d.product.imageUrl},null,8,j),s("div",A,[s("div",B,[s("p",I,o(d.product.title),1)]),s("div",P,[s("p",F,o(d.qty)+" / 週",1),s("p",H," NT$ "+o(d.final_total),1)])])]))),128))])]),s("div",q,[s("div",Y,[z,s("ul",G,[s("li",J,[s("p",K," 訂單金額： NT$ "+o(e.order.total),1),Q,s("p",W," NT$ "+o(e.order.total),1)]),s("li",X,[s("p",Z,"訂單編號： "+o(e.order.id),1),$,s("p",ss,o(e.order.id),1)]),s("li",es,[s("p",os," 下單時間："+o(this.date(e.order.create_at)),1),ts,s("p",cs,o(this.date(e.order.create_at)),1)]),s("li",ds,[s("p",ls,[w(" 付款狀態： "),e.order.is_paid?(r(),n("span",rs,"已付款")):(r(),n("span",ns,"未付款"))]),as,s("p",is,[e.order.is_paid?(r(),n("span",ms,"已付款")):(r(),n("span",ps,"未付款"))])]),s("li",_s,[s("p",bs," 寄送地址： "+o(e.user.address),1),hs,s("p",us,o(e.user.address),1)]),s("li",gs,[s("p",fs," 顧客姓名： "+o(e.user.name),1),xs,s("p",ws,o(e.user.name),1)]),s("li",ys,[s("p",ks,"聯絡電話： "+o(e.user.tel),1),vs,s("p",Ls,o(e.user.tel),1)]),s("li",Ts,[s("p",Ss," 電子信箱： "+o(e.user.email),1),Vs,s("p",Ds,o(e.user.email),1)]),s("li",Es,[s("p",Ms," 客戶備註："+o(e.order.message),1),Ns,s("p",Os,o(e.order.message),1)])]),s("div",{class:"btn btn-outline-danger w-100",onClick:t[0]||(t[0]=(...d)=>a.payOrder&&a.payOrder(...d))},"確認付款")])])])])])]),y(i,{active:e.isLoading,"onUpdate:active":t[1]||(t[1]=d=>e.isLoading=d),id:"cartPage"},null,8,["active"])],64)}const Bs=u(S,[["render",Cs]]);export{Bs as default};
