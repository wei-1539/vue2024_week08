import{_ as y,m as _,r as h,o as r,c as d,d as t,f as l,g as u,t as e,h as a,F as b,e as f,w as v,v as x,B as w}from"./index-y6of4hzk.js";import{u as C}from"./cartStore-BbtCNZ6a.js";import{a as k,u as T}from"./axios-Cze289aN.js";import{L}from"./LoadingComponent-spv3xudz.js";var V={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"wei_rio",BASE_URL:"/vue2024_week08/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:q,VITE_PATH:E}=V,P={components:{LoadingComponent:L},data(){return{product:{},newContentTitle:"",newContent:[],isLoading:!1,qty:1}},methods:{..._(C,["addToCart","changeCartQty"]),..._(T,["pushMessage"]),getProduct(){const{id:i}=this.$route.params,s=`${q}api/${E}/product/${i}`;this.isLoading=!0,k.get(s).then(n=>{this.product=n.data.product,this.content()}).catch(n=>{this.pushMessage({style:"danger",title:"產品資訊取得失敗",content:n.response.data.message})}).finally(()=>{setTimeout(()=>{this.isLoading=!1},500)})},content(){const i=this.product.content.split(`
`),s=[];for(let n=0;n<i.length;n++)s.push(i[n]);this.newContentTitle=s[0],s.shift(),this.newContent=s}},mounted(){this.getProduct(),window.scrollTo({behavior:"smooth",top:0})}},D={class:"bg-dark text-light py-lg-7 py-4"},R={class:"container pb-7"},A={class:"row"},M={class:"col-md-7 d-flex flex-column justify-content-center mb-lg-0 mb-4"},N={"aria-label":"breadcrumb "},S={class:"breadcrumb d-lg-none bg-dark px-0 mb-3"},U={class:"breadcrumb-item opacity-50"},B=t("li",{class:"opacity-25 px-2"},"/",-1),H={class:"breadcrumb-item opacity-50"},I=t("li",{class:"opacity-25 px-2"},"/",-1),Q=t("li",{class:"breadcrumb-item","aria-current":"page"},"Detail",-1),j=["src"],F={class:"col-md-5"},O={"aria-label":"breadcrumb "},Y={class:"breadcrumb bg-dark px-0 mb-2 d-none d-lg-flex"},z={class:"breadcrumb-item opacity-50"},G=t("li",{class:"opacity-25 px-2"},"/",-1),J={class:"breadcrumb-item opacity-50"},K=t("li",{class:"opacity-25 px-2"},"/",-1),W=t("li",{class:"breadcrumb-item","aria-current":"page"},"Detail",-1),X={class:"mb-1"},Z={class:"d-flex justify-content-end border-3 border-bottom pb-2 mb-4"},$={key:0,class:"h5 mb-0 fw-bold text-danger me-3"},tt={key:1},ot={class:"h5 mb-0 me-4 opacity-75"},st={class:"d-inline-block h5 mb-0 fw-bold text-danger me-3"},et={class:"mb-0"},it={class:"d-inline-block ms-2"},nt={class:"mb-4 border-3 border-bottom"},ct=t("h4",{class:"mb-2"},"電影描述",-1),rt={class:"movieContent opacity-75"},dt={class:"mb-2"},lt={class:"mb-4"},at={class:"row align-items-center"},pt={class:"col-6"},ut={class:"input-group my-3 rounded bg-dark"},_t={class:"input-group-prepend"},ht=["disabled"],bt=t("i",{class:"bi bi-dash fs-5"},null,-1),mt=[bt],gt={class:"input-group-append"},yt=t("i",{class:"bi bi-plus fs-5"},null,-1),ft=[yt],vt={class:"col-6"},xt={class:"w-100 position-relative my-5 border-3 border-top pt-5",style:{"padding-bottom":"56.25%"}},wt=t("h3",{class:"mb-4 border-3 border-start border-danger ps-lg-3 ps-2"},"觀賞預告片",-1),Ct=["src"];function kt(i,s,n,Tt,o,Lt){const p=h("RouterLink"),m=h("LoadingComponent");return r(),d(b,null,[t("div",D,[t("section",null,[t("div",R,[t("div",A,[t("div",M,[t("nav",N,[t("ol",S,[t("li",U,[l(p,{to:"/",class:"text-light text-decoration-none"},{default:u(()=>[a(" Home ")]),_:1})]),B,t("li",H,[l(p,{to:"/products",class:"text-light text-decoration-none"},{default:u(()=>[a(" Product ")]),_:1})]),I,Q])]),t("img",{class:"w-75 mx-auto",style:{},src:o.product.imageUrl,alt:""},null,8,j)]),t("div",F,[t("nav",O,[t("ol",Y,[t("li",z,[l(p,{to:"/",class:"text-light text-decoration-none"},{default:u(()=>[a(" Home ")]),_:1})]),G,t("li",J,[l(p,{to:"/products",class:"text-light text-decoration-none"},{default:u(()=>[a(" Product ")]),_:1})]),K,W])]),t("h2",X,e(o.product.title),1),t("p",null,e(o.product.category)+"片",1),t("div",Z,[o.product.origin_price===o.product.price?(r(),d("p",$,"NT$ "+e(o.product.price),1)):(r(),d("div",tt,[t("del",ot,"NT$ "+e(o.product.origin_price),1),t("p",st,"NT$ "+e(o.product.price),1)])),t("p",et,[a("/"),t("span",it,e(o.product.unit),1)])]),t("div",nt,[ct,t("p",rt,e(o.product.description),1),t("h4",dt,e(o.newContentTitle),1),t("div",lt,[(r(!0),d(b,null,f(o.newContent,(c,g)=>(r(),d("p",{class:"movieContent opacity-75 mb-0",key:g},e(c),1))),128))])]),t("div",at,[t("div",pt,[t("div",ut,[t("div",_t,[t("button",{class:"btn btn-outline-light rounded-0 p-2 bg-dark text-light",type:"button",id:"button-addon1",disabled:this.qty===1,onClick:s[0]||(s[0]=c=>{this.qty--,i.changeCartQty(o.product.id,this.qty)})},mt,8,ht)]),v(t("input",{type:"text",class:"form-control border text-center shadow-none bg-dark text-light fs-5",value:"1",min:"1",readonly:"","onUpdate:modelValue":s[1]||(s[1]=c=>this.qty=c)},null,512),[[x,this.qty]]),t("div",gt,[t("button",{class:"btn btn-outline-light rounded-0 p-2 bg-dark text-light",type:"button",id:"button-addon2",onClick:s[2]||(s[2]=c=>{this.qty++,i.changeCartQty(o.product.id,this.qty)})},ft)])])]),t("div",vt,[t("a",{class:"text-nowrap btn btn-danger w-100 py-2",onClick:s[3]||(s[3]=w(c=>i.addToCart(o.product.id,this.qty),["prevent"]))},"加入購物車")])])])]),t("div",xt,[wt,t("iframe",{id:"player",class:"position-absolute",width:"100%",height:"100%",src:`${o.product.youtubeLink}?rel=0&showinfo=0&color=white`,title:"YouTube video player",frameborder:"0",allow:" autoplay; ",allowfullscreen:""},null,8,Ct)])])])]),l(m,{active:o.isLoading,"onUpdate:active":s[4]||(s[4]=c=>o.isLoading=c)},null,8,["active"])],64)}const Dt=y(P,[["render",kt]]);export{Dt as default};
